<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>MediSupply ‚Äî Inicio</title>
    <link rel="stylesheet" href="dashboard-admin.component.css" />
  </head>
  <body>
    <header class="topbar" role="region" aria-label="Barra superior">
      <div class="title">
        <h2 data-i18n="dashboard.title">MediSupply</h2>
        <p>Panel de control ‚Äî Accesos r√°pidos</p>
      </div>
      <div class="controls" role="group" aria-label="Controles de usuario">
        <div class="controls-relative">
          <div class="lang-select-wrap" style="position:relative;">
            <button class="lang-select" (click)="showLangMenu = !showLangMenu" [attr.aria-expanded]="showLangMenu" aria-haspopup="true" aria-controls="langMenu" title="Cambiar idioma">
              <span aria-hidden="true">üåê</span>
              <span class="muted" style="margin-left:6px">{{ selectedLanguage.toUpperCase() }}</span>
            </button>
            @if (showLangMenu) {
              <div class="lang-menu" id="langMenu" role="menu">
                @for (lang of languages; track lang) {
                  <button role="menuitem" class="small-link lang-menu-btn" (click)="selectedLanguage = lang.code; showLangMenu = false">
                    {{ lang.label }}
                  </button>
                }
              </div>
            }
          </div>
        </div>
        <button class="notif" aria-label="Notificaciones" title="Notificaciones" tabindex="0">üîî</button>
        <div style="display:flex; align-items:center; gap:8px">
          <div class="profile-info">
            <div class="profile-info-name">Laura G√≥mez</div>
            <div class="profile-info-role">Administrador</div>
          </div>
          <div class="avatar" aria-hidden="true">LG</div>
        </div>
      </div>
    </header>
    <section class="grid" aria-label="Accesos r√°pidos">
      <!-- Card 1 Proveedores -->
      <article class="card" aria-labelledby="card1-title" tabindex="0">
        <div class="card-top">
          <div class="icon" aria-hidden="true">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 7l9-4 9 4v9a2 2 0 0 1-2 2h-14a2 2 0 0 1-2-2z" stroke="#1E63A8" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>
          <div>
            <h3 id="card1-title" data-i18n="card.suppliers.title">Registro de proveedores</h3>
            <p class="muted">Carga individual o masiva (CSV).</p>
          </div>
        </div>
        <div class="cta">
          <button mat-raised-button color="primary" routerLink="/proveedor-list" aria-label="Registrar nuevo proveedor" data-i18n="btn.register">Registrar nuevo</button>
          <p>   </p>
          <button mat-raised-button color="primary" routerLink="/proveedor-upload" aria-label="Carga masiva" data-i18n="btn.register">Carga masiva</button>

        </div>
      </article>

      <!-- Card 6 Productos -->
      <article class="card" aria-labelledby="card6-title" tabindex="0">
        <div class="card-top">
          <div class="icon" aria-hidden="true">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 7l9-4 9 4v9a2 2 0 0 1-2 2h-14a2 2 0 0 1-2-2z" stroke="#1E63A8" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>
          <div>
            <h3 id="card6-title" data-i18n="card.suppliers.title">Registro de productos</h3>
            <p class="muted">Carga individual o masiva (CSV).</p>
          </div>
        </div>
        <div class="cta">
          <button mat-raised-button color="primary" routerLink="/producto-list" aria-label="Registrar nuevo producto" data-i18n="btn.register">Registrar nuevo</button>
          <p>   </p>
          <button mat-raised-button color="primary" routerLink="/producto-upload" aria-label="Carga masiva" data-i18n="btn.register">Carga masiva</button>
        </div>
      </article>

      <!-- Card 2 -->
      <article class="card" aria-labelledby="card2-title" tabindex="0">
        <div class="card-top">
          <div class="icon" aria-hidden="true">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M17 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" stroke="#1E63A8" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="7" r="4" stroke="#1E63A8" stroke-width="1.6"/></svg>
          </div>
          <div>
            <h3 id="card2-title" data-i18n="card.vendors.title">Gesti√≥n de vendedores y planes de venta</h3>
            <p class="muted">Crear y asignar metas a vendedores.</p>
          </div>
        </div>
        <div class="cta">
          <button mat-raised-button color="primary" routerLink="/vendedor-list" aria-label="Agregar vendedor" data-i18n="btn.add_vendor">Agregar vendedor</button>
        </div>
      </article>

      <!-- Card 3 -->
      <article class="card" aria-labelledby="card3-title" tabindex="0">
        <div class="card-top">
          <div class="icon" aria-hidden="true">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M17 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" stroke="#1E63A8" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="7" r="4" stroke="#1E63A8" stroke-width="1.6"/></svg>
          </div>
          <div>
            <h3 id="card3-title" data-i18n="card.reports.title">Reportes e informes de ventas</h3>
            <p class="muted">Filtra por fechas y exporta en PDF/Excel.</p>
          </div>
        </div>
        <div class="cta">
          <button mat-raised-button color="primary" routerLink="/informe-ventas" aria-label="Ver reporte" data-i18n="btn.ver_reporte">Ver reporte</button>
        </div>
      </article>

      <!-- Card 4 (wide) -->
      <article class="card" aria-labelledby="card4-title" tabindex="0">
        <div style="display:flex; gap:16px; align-items:center; min-width:0;">
          <div class="icon" aria-hidden="true">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M12 21s7-4.5 7-10a7 7 0 1 0-14 0c0 5.5 7 10 7 10z" stroke="#1E63A8" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="11" r="2.2" stroke="#1E63A8" stroke-width="1.6" stroke-linecap="round"/></svg>
          </div>
          <div style="min-width:0">
            <h3 id="card4-title" data-i18n="card.inventory.title">Inventario y localizaci√≥n de productos</h3>
            <p class="muted">Buscar producto y ver stock por bodega / ubicaci√≥n.</p>
          </div>
        </div>
        <div class="cta">
          <button mat-raised-button color="primary" routerLink="/producto-localizacion" aria-label="Buscar producto" data-i18n="btn.buscar_reporte">Buscar localizaci√≥n de producto</button>
        </div>

      </article>

      <!-- Card 5 -->
      <article class="card" aria-labelledby="card5-title" tabindex="0">
        <div class="card-top">
          <div class="icon" aria-hidden="true">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M1 3h13l7 7v8a1 1 0 0 1-1 1h-1M16 21a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm-10 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" stroke="#1E63A8" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>
          <div>
            <h3 id="card5-title" data-i18n="card.routes.title">Rutas de entrega</h3>
            <p class="muted">Generaci√≥n y optimizaci√≥n de rutas.</p>
          </div>
        </div>
        <div class="cta">
          <button mat-raised-button color="primary" routerLink="/rutas-entrega" aria-label="Ver rutas">Ver rutas</button>
        </div>
      </article>


      <!-- Card 7 Metas de venta -->
      <article class="card" aria-labelledby="card7-title" tabindex="0">
        <div class="card-top">
          <div class="icon" aria-hidden="true">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="10" stroke="#1E63A8" stroke-width="1.6"/><path d="M8 12l2.5 2.5L16 9" stroke="#1E63A8" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>
          <div>
            <h3 id="card7-title">Metas de venta</h3>
            <p class="muted">Definici√≥n, asignaci√≥n y seguimiento de metas.</p>
          </div>
        </div>
        <div class="cta">
          <button mat-raised-button color="primary" routerLink="/metas-list" aria-label="Gestionar metas de venta">Gestionar metas</button>
        </div>
      </article>
    </section>

    <script>
      // ===== Language menu (improved) =====
      const langBtn = document.getElementById('langBtn');
      const langMenu = document.getElementById('langMenu');
      langBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      const shown = langMenu.classList.toggle('show');
      langBtn.setAttribute('aria-expanded', shown ? 'true' : 'false');
      if (shown) langMenu.querySelector('button')?.focus();
      });
      document.addEventListener('click', (e) => {
      if (langMenu.classList.contains('show') && !langBtn.contains(e.target) && !langMenu.contains(e.target)) {
      langMenu.classList.remove('show');
      langBtn.setAttribute('aria-expanded', 'false');
    }
    });
    langMenu.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
    langMenu.classList.remove('show');
    langBtn.setAttribute('aria-expanded', 'false');
    langBtn.focus();
  }
  });
  document.querySelectorAll('#langMenu [data-locale]').forEach(btn => {
  btn.addEventListener('click', (e) => {
  const locale = e.currentTarget.dataset.locale;
  applyLocale(locale);
  langMenu.classList.remove('show');
  langBtn.setAttribute('aria-expanded', 'false');
  langBtn.querySelector('.muted') && (langBtn.querySelector('.muted').innerText = locale.toUpperCase());
  langBtn.focus();
  });
  });

  // ===== i18n swap (demo) =====
  const strings = {
  es: {
  "lang.es": "Espa√±ol",
  "lang.en": "Ingl√©s",
  "lang.pt": "Portugu√©s",
  "dashboard.title":"MediSupply",
  "card.suppliers.title":"Registro de proveedores y productos",
  "btn.register":"Registrar nuevo",
  "card.vendors.title":"Gesti√≥n de vendedores y planes de venta",
  "btn.add_vendor":"Agregar vendedor",
  "card.reports.title":"Reportes e informes de ventas",
  "btn.view_reports":"Ver reportes",
  "card.inventory.title":"Inventario y localizaci√≥n de productos",
  "card.routes.title":"Rutas de entrega"
  },
  en: {
  "lang.es": "Spanish",
  "lang.en": "English",
  "lang.pt": "Portuguese",
  "dashboard.title":"MediSupply",
  "card.suppliers.title":"Suppliers & products registration",
  "btn.register":"Register new",
  "card.vendors.title":"Vendors & sales plans",
  "btn.add_vendor":"Add vendor",
  "card.reports.title":"Sales reports & insights",
  "btn.view_reports":"View reports",
  "card.inventory.title":"Inventory & product location",
  "card.routes.title":"Delivery routes"
  },
  pt: {
  "lang.es": "Espanhol",
  "lang.en": "Ingl√™s",
  "lang.pt": "Portugu√™s",
  "dashboard.title":"MediSupply",
  "card.suppliers.title":"Registro de fornecedores e produtos",
  "btn.register":"Registrar novo",
  "card.vendors.title":"Gest√£o de vendedores e planos de venda",
  "btn.add_vendor":"Adicionar vendedor",
  "card.reports.title":"Relat√≥rios de vendas",
  "btn.view_reports":"Ver relat√≥rios",
  "card.inventory.title":"Invent√°rio e localiza√ß√£o de produtos",
  "card.routes.title":"Rotas de entrega"
}
};

function applyLocale(locale) {
const dict = strings[locale] || strings.es;
document.querySelectorAll('[data-i18n]').forEach(node => {
const key = node.getAttribute('data-i18n');
if (dict[key]) node.innerText = dict[key];
});
document.documentElement.lang = locale;
}
applyLocale('es');
</script>
</body>
</html>
