<mat-card class="form-card">
  <mat-card-header class="card-header">
    <mat-card-title class="card-title">{{ 'SUPPLIERS.EDIT_TITLE' | translate }}</mat-card-title>
  </mat-card-header>

  <mat-card-content>
    @if (loading() && !proveedorForm.value.razonSocial) {
      <div class="loading-container">
        <mat-spinner></mat-spinner>
      </div>
    } @else {
      <form [formGroup]="proveedorForm" (ngSubmit)="onSubmit()">
        <!-- Razón Social -->
        <mat-form-field appearance="outline" class="full-width form-field required" floatLabel="always">
          <mat-label>{{ 'SUPPLIERS.BUSINESS_NAME' | translate }}</mat-label>
          <input matInput formControlName="razonSocial" maxlength="200">
          <mat-error>{{ getFieldError('razonSocial') }}</mat-error>
        </mat-form-field>

        <!-- NIT -->
        <mat-form-field appearance="outline" class="full-width form-field required" floatLabel="always">
          <mat-label>{{ 'SUPPLIERS.RUC' | translate }}</mat-label>
          <input matInput formControlName="ruc" maxlength="20">
          <mat-error>{{ getFieldError('ruc') }}</mat-error>
        </mat-form-field>

        <!-- País -->
        <mat-form-field appearance="outline" class="full-width form-field required" floatLabel="always">
          <mat-label>{{ 'SUPPLIERS.COUNTRY' | translate }}</mat-label>
          <input matInput formControlName="country" maxlength="100">
          <mat-error>{{ getFieldError('country') }}</mat-error>
        </mat-form-field>

        <!-- Teléfono -->
        <mat-form-field appearance="outline" class="full-width form-field required" floatLabel="always">
          <mat-label>{{ 'SUPPLIERS.PHONE' | translate }}</mat-label>
          <input matInput formControlName="telefono" maxlength="20">
          <mat-error>{{ getFieldError('telefono') }}</mat-error>
        </mat-form-field>

        <!-- Correo Contacto -->
        <mat-form-field appearance="outline" class="full-width form-field required" floatLabel="always">
          <mat-label>{{ 'SUPPLIERS.EMAIL' | translate }}</mat-label>
          <input matInput type="email" formControlName="correoContacto" maxlength="150">
          <mat-error>{{ getFieldError('correoContacto') }}</mat-error>
        </mat-form-field>

        <!-- Website -->
        <mat-form-field appearance="outline" class="full-width form-field" floatLabel="always">
          <mat-label>{{ 'SUPPLIERS.WEBSITE' | translate }}</mat-label>
          <input matInput formControlName="website" maxlength="200">
          <mat-error>{{ getFieldError('website') }}</mat-error>
        </mat-form-field>

        <!-- Moneda -->
        <mat-form-field appearance="outline" class="full-width form-field" floatLabel="always">
          <mat-label>{{ 'SUPPLIERS.CURRENCY' | translate }}</mat-label>
          <mat-select formControlName="currency">
            @for (moneda of monedasDisponibles; track moneda) {
              <mat-option [value]="moneda">{{ moneda }}</mat-option>
            }
          </mat-select>
          <mat-error>{{ getFieldError('currency') }}</mat-error>
        </mat-form-field>

        <!-- Dirección -->
        <mat-form-field appearance="outline" class="full-width form-field required" floatLabel="always">
          <mat-label>{{ 'SUPPLIERS.ADDRESS' | translate }}</mat-label>
          <input matInput formControlName="addressLine1" maxlength="300">
          <mat-error>{{ getFieldError('addressLine1') }}</mat-error>
        </mat-form-field>

        <!-- Ciudad -->
        <mat-form-field appearance="outline" class="full-width form-field required" floatLabel="always">
          <mat-label>{{ 'SUPPLIERS.CITY' | translate }}</mat-label>
          <input matInput formControlName="city" maxlength="100">
          <mat-error>{{ getFieldError('city') }}</mat-error>
        </mat-form-field>

        <!-- Estado/Región -->
        <mat-form-field appearance="outline" class="full-width form-field" floatLabel="always">
          <mat-label>{{ 'SUPPLIERS.STATE' | translate }}</mat-label>
          <input matInput formControlName="state" maxlength="100">
          <mat-error>{{ getFieldError('state') }}</mat-error>
        </mat-form-field>

        <!-- Términos de Pago -->
        <mat-form-field appearance="outline" class="full-width form-field" floatLabel="always">
          <mat-label>{{ 'SUPPLIERS.PAYMENT_TERMS' | translate }}</mat-label>
          <input matInput formControlName="paymentTerms" maxlength="200">
          <mat-error>{{ getFieldError('paymentTerms') }}</mat-error>
        </mat-form-field>

        <!-- Límite de Crédito -->
        <mat-form-field appearance="outline" class="full-width form-field" floatLabel="always">
          <mat-label>{{ 'SUPPLIERS.CREDIT_LIMIT' | translate }}</mat-label>
          <input matInput type="number" formControlName="creditLimit" min="0" max="999999999.99" step="0.01">
          <mat-error>{{ getFieldError('creditLimit') }}</mat-error>
        </mat-form-field>

        <!-- Botones de acción -->
        <div class="button-container">
          <button mat-raised-button color="primary" type="submit" [disabled]="loading()">
            @if (loading()) {
              <mat-spinner diameter="20"></mat-spinner>
            }
            {{ 'COMMON.SAVE' | translate }}
          </button>
          <button mat-raised-button type="button" (click)="onCancel()" [disabled]="loading()">
            {{ 'COMMON.CANCEL' | translate }}
          </button>
        </div>
      </form>
    }
  </mat-card-content>
</mat-card>
